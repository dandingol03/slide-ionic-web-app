<ion-view >


  <ion-nav-bar class="bar-stable" align-title="center" >


    <ion-nav-buttons side="left">
      <button class="button button-icon button-clear bar_arr" ng-click="go_back()">
        <i class="ion-chevron-left"></i>
      </button>
    </ion-nav-buttons>
    <ion-nav-title>

    </ion-nav-title>


    <ion-nav-buttons side="right">

      <button class="button button-icon button-clear" >
        <i class="ion-plus"></i>
      </button>
    </ion-nav-buttons>

  </ion-nav-bar>


  <ion-content scroll="false">

    <div class="list" style="margin-bottom: 0px;">
      <ul class="ul-tabs dark-theme" style="background: rgb(203,203,203)">
        <li style="width:50%;font-size: medium;" >
          <div class="cell"
               ng-class="{true: 'selected', false: ''}[tabIndex==0]"
               ng-click="tab_change(0)">
            <span style="position:absolute;left:15%;top:40%;">
              已有被保险人
            </span>
          </div>
        </li>
        <li style="width:50%; font-size: medium;" >
          <div class="cell"
               ng-class="{true: 'selected', false: ''}[tabIndex==1]"
               ng-click="tab_change(1)">
            <span style="position:absolute;left: 20%;top:40%;">
              新建被保险人
            </span>
          </div>
        </li>

      </ul>
    </div>


    <div ng-if="tabIndex==0" style="height: 100%;">

      <div
        class="list list-inset padding"
        style="height: 65%;"
        >

        <div class="item"
             style="margin:1px;border-top:0px;border-left:0px;border-right:0px;border-bottom:1px solid #222;
                 padding:10px;background-color:transparent;overflow:initial">

            <span
              class="input-label"
              style="display: inline-block;width: 25%;text-align: left"
              >
              姓名:
            </span>

            <span
              style="width: 55%;display: inline-block;text-align: left;"
              >
             <input type="text" placeholder="输入亲属姓名"
                    ng-value="car_insurance.insuranceder.perName"
                    ng-model="car_insurance.insuranceder.perName"/>
            </span>

            <span
              style="display:inline-block;width: 20%;text-align: center;vertical-align: middle;"
              ng-click="selectCarInsuranceder()"
              >
              <button class="button button-small button-assertive">
                搜索
              </button>
            </span>

        </div>

        <ion-scroll style="height: 85%;">

          <div class="item" ng-repeat="person in car_insurance.relativePersons" ng-click="mutex(person,car_insurance.relativePersons)">

            <div style="display:inline-block;width:70%">
               <span>
                {{person.perName}}
               </span>
            </div>

            <i ng-if="person.checked!=true" class="ion-ios-checkmark-outline" ></i>
            <i ng-if="person.checked==true" class="ion-ios-checkmark" ></i>

          </div>
          <div style="height: 20px;">
          </div>
        </ion-scroll>

      </div>

      <div
        class="list list-inset padding"
        style="margin:0px 10px;padding:0px 10px;"
        >
        <div
          class="item"
          style="margin:1px;border:0px;padding:0px 10px;background-color:transparent;"
          >
          <button
            class="button button-block button-calm"
            ng-click="confirm()"
            style="width: 80%;margin-left:10%;margin-top:0px;"
            >
            提交车险意向
          </button>
        </div>
      </div>

    </div>


    <div ng-if="tabIndex==1" style="height: 90%;">

      <ion-scroll style="height: 80%;">
        <div class="list list-inset padding" style="height:100%">

          <div class="item" style="margin:1px;border-top:0px;border-left:0px;border-right:0px;padding:10px; ">
               <span class="input-label" style="display: inline-block;">
                姓名:
              </span>
            <input type="text" placeholder="输入被保险人姓名"
                   style="display: inline-block"
                   ng-value="car_insurance.insuranceder.perName"
                   ng-model="car_insurance.insuranceder.perName"
                   ng-change="validate(car_insurance.insuranceder,'perName','//')"/>

            <div class="assertive" style="width: 50%;display: inline-block" ng-if="car_insurance.insuranceder.perName_error==true">
              姓名不能为英文或数字
            </div>
          </div>


          <div class="item"
               style="margin:1px;border:0px;padding:10px;position: relative;">

            <div>
              <div class="item"
                   style="background-color:transparent;border: 0px;padding: 0px;"
                   ng-if="photoIndex==0">
                <div style="padding-left:10px;padding-right: 10px; position: relative;background-color:transparent;">
                  <span class="input-label" style="display: inline-block;width: 65%;background-color:transparent;">
                      身份证正面:
                  </span>
                </div>
              </div>
              <div class="item"
                   style="background-color:transparent;border: 0px;padding: 0px;"
                   ng-if="photoIndex==1">
                <div style="padding-left:10px;padding-right: 10px; position: relative;background-color:transparent;">
                  <span class="input-label" style="display: inline-block;width: 65%;background-color:transparent;">
                       身份证反面:
                  </span>
                </div>
              </div>
            </div>


            <div>
                <div style="width:100%;text-align:center;margin-left:0%;height:180px;border:1px dashed #9e9e9e"
                     ng-if="car_insurance.insuranceder[imgArrs[photoIndex]]!==undefined&&car_insurance.insuranceder[imgArrs[photoIndex]]!==null">
                  <img style="width: 100%;max-height: 180px;"
                       ng-src="{{car_insurance.insuranceder[imgArrs[photoIndex]]}}"/>
                </div>

                <div style="width: 100%;text-align:center;margin-left:0%;height:180px;"
                     ng-if="car_insurance.insuranceder[imgArrs[photoIndex]]==undefined||car_insurance.insuranceder[imgArrs[photoIndex]]==null">
                       <span style="font-size: 10em;" ng-click="addAttachment(car_insurance.insuranceder,'perIdCard1_img')">
                           <i class="ion-android-camera"></i>
                       </span>
                </div>

                <div class="card"
                     style="width: 90%;height: 55px;margin-left: 5%;margin-top:0px;">
                  <div class="item item-text-wrap">
                    <div style="position:absolute;bottom:10px;width:100%;top:0px;left:0px;">
                      <div ng-click="changePhotoIndex(0)"
                           style="display:inline-block;width: 20%;text-align:center;">
                        <span>身份证正面</span>
                      </div>

                      <div ng-click="addAttachment(car_insurance.insuranceder,imgArrs[photoIndex])" style="display:inline-block;width: 50%;text-align: center;font-size: 3em;">
                        <i class="ion-android-camera"></i>
                      </div>

                      <div ng-click="changePhotoIndex(1)"
                           style="display:inline-block;width: 20%;text-align:center;">
                        <span>身份证反面</span>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>

      </ion-scroll>


      <div style="width: 100%;height: 20%;text-align: center;position: relative">
        <button class="button button-block button-calm"
                style=";width: 70%;position: absolute;left:15%;bottom:10%;"
                ng-click="confirm()">
          提交车险意向
        </button>
      </div>
    </div>





  </ion-content>




</ion-view>
