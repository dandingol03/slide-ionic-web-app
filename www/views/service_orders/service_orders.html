<ion-nav-view class="slide-left-right" hide-nav-bar="true">
  <ion-view view-title="服务订单" hide-nav-bar="true">

    <ion-content scroll="false" style="background-image: url('img/flowAndMoutain@2x.png');background-repeat: no-repeat;
    background-size: 100%;background-position: 0% 100%;">

      <!-- header bar -->
      <div class="bar bar-header bar-dark" style="position: static;height:44px;width: 100%;padding-left: 16px;padding-right: 16px;background-color: rgba(17, 17, 17, 0.6);">
        <h1 class="title" style="display: inline-block;width:100%;text-align:center;">
                <span style="display: inline-block;width: 10%;text-align: center;font-size: 1.6em;"  ng-click="goBack()">
                    <i class="ion-chevron-left"></i>
                </span>
          <span style="display: inline-block;width: 70%;text-align: center;">
                    服务订单
                </span>
          <span style="display: inline-block;font-size:1.5em;text-align: center;width: 20%;"
                ng-click="fetchServiceOrders()">
                  <i class="ion-refresh"></i>
              </span>
          <span style="display: inline-block;width: 5%;">
              </span>
        </h1>
      </div>


      <div style="margin-top:5%;margin-left:5%;width:90%;height: 40px;padding: 0;">

        <div style="width: 2%;display: inline-block;height: 100%"></div>

        <div ng-style="tabIndex==0?selectedTabStyle:unSelectedTabStyle"
             style="border-top-left-radius: 7px;border-bottom-left-radius: 7px;"
             ng-click="tab_change(0)">
          <div style="width: 100%;height: 100%;display: table;">
            <span style="display: table-cell;vertical-align: middle;text-align: center;">已下单</span>
          </div>
        </div>
        <div ng-style="tabIndex==1?selectedTabStyle:unSelectedTabStyle" ng-click="tab_change(1)">
          <div style="width: 100%;height: 100%;display: table;">
            <span style="display: table-cell;vertical-align: middle;text-align: center;">服务中</span>
          </div>
        </div>
        <div ng-style="tabIndex==2?selectedTabStyle:unSelectedTabStyle"
             style="border-top-right-radius: 7px;border-bottom-right-radius: 7px;"
             ng-click="tab_change(2)">
          <div style="width: 100%;height: 100%;display: table;">
            <span style="display: table-cell;vertical-align: middle;text-align: center;">已完成</span>
          </div>
        </div>
        <div style="width: 1%;display: inline-block;height: 100%;"></div>
      </div>


      <!--<div>-->
      <div ng-style="orderRemain">

            <div class="list list-inset " style="margin-left:0px;margin-right:0px;margin-top:0px;height: 100%;background: transparent;" >

              <!-- 已下单 -->
              <div class="item"
                   ng-if="tabIndex==0"
                   style="margin:1px;border-top:0px;border-left:0px;border-right:0px;border-bottom: 0px;padding:10px 4px ;height: 100%;background: transparent;">
                <div class="list list-inset" style="margin-top:0px;">


                  <!--<div ng-repeat="order in orders1|orderBy:'-applyTime'" style="">-->
                  <!--<ul class="list" style="margin-bottom:0px;">-->
                  <!--<li class="item item-icon-right"-->
                  <!--style="padding-right:34px;position: relative;border:0px;">-->
                  <!--<div style="display:inline-block;width:95%;">-->
                  <!--<div>订单号:{{order.orderNum}}</div>-->
                  <!--</div>-->
                  <!--</li>-->
                  <!--</ul>-->
                  <!--<ul class="list">-->
                  <!--<li class="item item-icon-right" ng-click="showOrderDetail(order)"-->
                  <!--style="padding-right:34px;padding-top:4px;padding-bottom:4px;position: relative;border:0px;">-->
                  <!--<div style="display:inline-block;width:95%;">-->
                  <!--<div style="margin-right:5%;">预计时间:{{order.time}}</div>-->
                  <!--<div style="margin-right:5%;">类型:{{order.serviceName}}</div>-->
                  <!--</div>-->
                  <!--<div style="display:inline-block;width:5%;align-items:center;position: absolute;top:20%;font-size: 2em;">-->
                  <!--<i class="ion-ios-arrow-forward"></i>-->
                  <!--</div>-->
                  <!--</li>-->
                  <!--</ul>-->
                  <!--</div>-->

                  <!-- 已下单 新界面 -->

                  <div class="item"
                       style="height: 40px;position: relative;margin-bottom: 1px;
                          border:1px solid #008b8b">

                    <div style="position: absolute;width: 30.3%;height: 100%;left:0;top:0;border-right:1px solid #008b8b;">
                      <div style="width:100%;height: 100%;display: table;">
                    <span style="display: table-cell;vertical-align: middle;font-size: 0.8em;
                          text-align: center;color:#008b8b">
                      预约时间
                    </span>
                      </div>
                    </div>

                    <span style="position: absolute;left:32%;width: 45%;height: 100%;top:0;">
                      <div style="width: 100%;height: 100%;display: table;">
                        <div style="display: table-cell;vertical-align: middle;text-align: center;">
                          <div style="font-size: 0.8em;color:#008b8b;">
                            服务内容
                          </div>
                        </div>
                      </div>
                    </span>

                    <span style="width:20%;height:100%;position: absolute;left:80%;top:0;text-align: center;">
                      <div style="width: 100%;height: 100%;display: table;">
                        <span style="display:table-cell;vertical-align: middle;">
                        </span>
                      </div>
                    </span>
                  </div>

                  <ion-scroll>
                    <div class="item" ng-repeat="order in orders1 | orderBy:'-estimateTime'"
                         ng-style="$index==(orders1.length-1)?lastRowStyle:($index==0?firstRowStyle:notFirstRowStyle)"
                         ng-click="showOrderDetail(order)">

                      <div style="position: absolute;width: 30%;height: 100%;left:0;top:0;">
                        <div style="width:100%;height: 100%;display: table;">
                          <span style="display: table-cell;vertical-align: middle;font-size: 0.8em;text-align: center">
                            <div>
                              {{order.estimateTime|date:'yyyy-MM-dd'}}
                            </div>
                            <div>
                              {{order.estimateTime|date:'HH:mm'}}
                            </div>
                          </span>
                        </div>
                      </div>

                      <div style="position: absolute;width: 1px;height: 100%;left:30%;top:0;background: #aaa;">
                        <div style="width: 100%;height: 100%;position: relative;">
                          <div style=" position: absolute;top: 40%;margin-left: -6px;z-index: 9999;background: #fff;">
                            <span style="font-size:0.8em;"><i class="fa fa-circle-o"></i></span>
                          </div>
                        </div>
                      </div>

                      <div style="position: absolute;width: 4%;height: 100%;left:31%;top:0;"></div>
                      <span style="position: absolute;left:35%;width: 45%;height: 100%;top:0;">
                        <div style="width: 100%;height: 100%;display: table;">
                          <div style="display: table-cell;vertical-align: middle;">
                            <div style="font-size: 0.8em;color:#222;">
                              订单号:{{order.orderNum}}
                            </div>
                            <div style="font-size: 0.8em;color:#222;">
                              类型:{{order.serviceName}}
                            </div>
                          </div>
                        </div>
                      </span>



                      <span style="width:20%;height:100%;position: absolute;left:80%;top:0;text-align: center;">
                        <div style="width: 100%;height: 100%;display: table;">
                          <span style="display:table-cell;vertical-align: middle;">

                            <!-- 未接单 -->
                            <div ng-if="order.candidateState!=true">
                                <span style="font-size: 0.8em;display: inline-block;vertical-align: baseline;">详细&nbsp;</span>
                                <span style="font-size: 3em;display: inline-block;vertical-align: middle;">
                                  <i class="ion-ios-arrow-forward"></i>
                                </span>
                            </div>

                            <!-- 有服务人员接单 -->
                            <div ng-if="order.candidateState==true">
                              <span class="rotate" style="font-size: 0.8em;display: inline-block;vertical-align: middle;padding:4px 12px;
                                  border:1px solid #ff4f39;border-radius: 6px;">
                                已接单
                              </span>
                            </div>

                          </span>
                        </div>
                      </span>

                    </div>
                  </ion-scroll>




                </div>
              </div>

              <!-- 服务中订单 -->
              <div class="item"
                   ng-if="tabIndex==1"
                   style="margin:1px;border-top:0px;border-left:0px;border-right:0px;border-bottom: 0px;padding:10px 4px;height: 100%;background: transparent;">

                <div class="list list-inset" style="margin-top:0px;height: 100%;background: transparent;">

                  <!-- 新界面 -->
                  <div class="item"
                       style="height: 40px;position: relative;margin-bottom: 1px;
                      border:1px solid #008b8b">

                    <div style="position: absolute;width: 30.3%;height: 100%;left:0;top:0;border-right:1px solid #008b8b;">
                      <div style="width:100%;height: 100%;display: table;">
                    <span style="display: table-cell;vertical-align: middle;font-size: 0.8em;
                          text-align: center;color:#008b8b">
                      预约时间
                    </span>
                      </div>
                    </div>

                    <span style="position: absolute;left:32%;width: 45%;height: 100%;top:0;">
                      <div style="width: 100%;height: 100%;display: table;">
                        <div style="display: table-cell;vertical-align: middle;text-align: center;">
                          <div style="font-size: 0.8em;color:#008b8b;">
                            服务内容
                          </div>
                        </div>
                      </div>
                    </span>



                    <span style="width:20%;height:100%;position: absolute;left:80%;top:0;text-align: center;">
                      <div style="width: 100%;height: 100%;display: table;">
                        <span style="display:table-cell;vertical-align: middle;">
                        </span>
                      </div>
                    </span>
                  </div>


                  <ion-scroll style="height: 95%;">
                    <div class="item" ng-repeat="order in orders2 | orderBy:'-applyTime'"
                         ng-style="$index==0?firstRowStyle:notFirstRowStyle"
                         ng-click="showOrderDetail(order)">

                      <div style="position: absolute;width: 30%;height: 100%;left:0;top:0;">
                        <div style="width:100%;height: 100%;display: table;">
                    <span style="display: table-cell;vertical-align: middle;font-size: 0.8em;text-align: center">

                      <div>
                        {{order.estimateTime|date:'yyyy-MM-dd'}}
                      </div>
                      <div>
                        {{order.estimateTime|date:'HH:mm'}}
                      </div>
                    </span>
                        </div>
                      </div>

                      <div style="position: absolute;width: 1px;height: 100%;left:30%;top:0;background: #aaa;">
                        <div style="width: 100%;height: 100%;position: relative;">
                          <div style=" position: absolute;top: 40%;margin-left: -6px;z-index: 9999;background: #fff;">
                            <span style="font-size:0.8em;"><i class="fa fa-circle-o"></i></span>
                          </div>
                        </div>
                      </div>

                      <div style="position: absolute;width: 4%;height: 100%;left:31%;top:0;"></div>
                      <span style="position: absolute;left:35%;width: 45%;height: 100%;top:0;">
                      <div style="width: 100%;height: 100%;display: table;">
                        <div style="display: table-cell;vertical-align: middle;">
                          <div style="font-size: 0.8em;color:#222;">
                            订单号:{{order.orderNum}}
                          </div>
                          <div style="font-size: 0.8em;color:#222;">
                            类型:{{order.serviceName}}
                          </div>
                        </div>
                      </div>
                    </span>


                      <span style="width:20%;height:100%;position: absolute;left:80%;top:0;text-align: center;">
                      <div style="width: 100%;height: 100%;display: table;">
                        <span style="display:table-cell;vertical-align: middle;">
                          <span style="font-size: 0.8em;display: inline-block;vertical-align: baseline;">详细&nbsp;</span>
                          <span style="font-size: 3em;display: inline-block;vertical-align: middle;">
                            <i class="ion-ios-arrow-forward"></i>
                          </span>
                        </span>
                      </div>
                    </span>

                    </div>
                    <div style="width: 100%;height: 80px;"></div>
                  </ion-scroll>

                </div>
              </div>


              <!-- 待支付订单 -->
              <div class="item"
                   ng-if="tabIndex==2"
                   style="margin:1px;border-top:0px;border-left:0px;border-right:0px;border-bottom: 0px;padding:10px;background: transparent;"
              >

                <div class="list list-inset" style="margin-top:0px;">

                  <div ng-repeat="order in orders3|orderBy:'-applyTime'" style="">
                    <ul class="list" style="margin-bottom:0px;">
                      <li class="item item-icon-right"
                          style="padding-right:34px;position: relative;border:0px;">
                        <div style="display:inline-block;width:80%;">
                          <div>订单号:{{order.orderNum}}</div>
                        </div>
                        <div style="display: inline-block;width: 20%;"  ng-if='order.evaluate==undefined||order.evaluate==null'>
                          <div style="border: 1px solid;border-radius: 6px;text-align: center;color:rgb(255, 82, 0)"
                               ng-click="evaluate()">
                            <span style="font-size: 0.8em;">等待评价</span>
                          </div>
                        </div>
                      </li>
                    </ul>
                    <ul class="list">
                      <li class="item item-icon-right" ng-click="showOrderDetail(order)"
                          style="padding-right:34px;padding-top:4px;padding-bottom:4px;position: relative;border:0px;">
                        <div style="display:inline-block;width:95%;">
                          <div style="margin-right:5%;">预约时间:{{order.time}}</div>
                          <div style="margin-right:5%;">类型:{{order.serviceName}}</div>
                        </div>
                        <div style="display:inline-block;width:5%;align-items:center;position: absolute;top:10%;">
                      <span style="font-size: 2em;">
                        <i class="ion-ios-arrow-forward"></i>
                      </span>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>


            </div>


        </div>


    </ion-content>

  </ion-view>

</ion-nav-view>





